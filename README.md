# Telegram Chat Analyzer

Этот проект представляет собой бот для анализа сообщений в топиках Telegram групп с помощью ChatGPT. Бот создает ежедневные сводки и может выполнять полный анализ истории чатов.

## Функциональность

- Ежедневный анализ сообщений в 09:00
- Анализ сообщений по команде
- Полный анализ истории чатов
- Отправка сводок в отдельную группу
- Работа с несколькими группами и топиками

## Требования

- Python 3.7+
- Telegram API credentials
- OpenAI API ключ
- Telegram Bot Token

## Установка

1. Клонируйте репозиторий:
```bash
git clone [url-репозитория]
cd telegram-chat-analyzer
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Создайте файл `.env` в корневой директории проекта:
```plaintext
TELEGRAM_API_ID=ваш_api_id
TELEGRAM_API_HASH=ваш_api_hash
OPENAI_API_KEY=ваш_openai_api_key
BOT_TOKEN=ваш_bot_token
TARGET_GROUP_LINK=https://t.me/+xxxxxxxx
```

## Получение необходимых данных

### Telegram API Credentials
1. Перейдите на https://my.telegram.org/auth
2. Войдите в свой аккаунт
3. Перейдите в "API development tools"
4. Создайте новое приложение
5. Скопируйте `api_id` и `api_hash`

### OpenAI API Key
1. Перейдите на https://platform.openai.com/
2. Создайте аккаунт или войдите в существующий
3. Перейдите в раздел API Keys
4. Создайте новый ключ

### Telegram Bot Token
1. Найдите @BotFather в Telegram
2. Отправьте команду /newbot
3. Следуйте инструкциям для создания бота
4. Скопируйте полученный токен

## Настройка групп для анализа

В файле `telegram_analyzer.py` найдите и отредактируйте структуру `CHATS_CONFIG`:

```python
CHATS_CONFIG = {
    ID_первой_группы: {
        'topic_ids': [список_id_топиков]
    },
    ID_второй_группы: {
        'topic_ids': [список_id_топиков]
    }
}
```

## Запуск

1. Убедитесь, что все данные в `.env` заполнены корректно
2. Запустите скрипт:
```bash
python telegram_analyzer.py
```

## Использование

### Команды бота
- `/analyze` - запуск анализа за последние 24 часа
- `/full_analyze` - запуск полного анализа истории чатов

### Автоматический анализ
- Бот автоматически выполняет анализ каждый день в 09:00
- Результаты отправляются в указанную группу

## Структура сводки

Каждая сводка содержит:
- Дату анализа
- Название группы
- Название топика
- Основные темы обсуждения
- Принятые решения
- Важные моменты

## Устранение неполадок

### Ошибка авторизации Telegram
- Проверьте правильность API_ID и API_HASH
- Убедитесь, что аккаунт не заблокирован

### Ошибка подключения к OpenAI
- Проверьте валидность API ключа
- Убедитесь в наличии средств на балансе

### Бот не отвечает на команды
- Проверьте правильность BOT_TOKEN
- Убедитесь, что бот запущен
- Проверьте права бота в группе

### Ошибки при анализе
- Убедитесь, что у бота есть доступ к указанным группам
- Проверьте правильность ID групп и топиков
- Убедитесь, что бот является участником всех групп

## Безопасность

- Не публикуйте файл `.env` в публичном доступе
- Регулярно меняйте API ключи
- Ограничьте доступ к боту только необходимым пользователям

## Поддержка

При возникновении проблем:
1. Проверьте логи ошибок
2. Убедитесь, что все зависимости установлены
3. Проверьте актуальность API ключей
4. Убедитесь в правильности конфигурации

## Лицензия

[Укажите тип лицензии] 